<% 

  ## This was added for the GeneDiseaseDup
  interp = assertions.interpretation.first 
%>
<% 
  ## Clear the CSS set above
  render_css_border = ""
  render_logo_inline = info_popover("gene-curation", "help", "" ,"logo-inline")
%>

<%
  temp = ""
  @validity.each do |assertion| 
%>
<%
    if render_as == "gene"
      if assertion.diseases.first.curie.to_s == disease.curie.to_s
        match = "match"
        temp = "render"
      else
        match = ""
        temp = ""
      end
    end

    if render_as == "disease"
        if assertion.genes.first.hgnc_id.to_s == gene.hgnc_id.to_s
        match = "match"
        temp = "render"
      else
        match = ""
        temp = ""
      end
    end
%>
<%
  if temp == "render"
%>
  <tbody class='<%= render_css_border %>'>
    <tr>
      <td class='<%= render_css_border %>'>
        <%= render_logo_inline %>
      </td>
      <td class='<%= render_css_border %>'>
        <%= info_popover("gene-curation", "score", interp.label, "strong") %>
        <div class='small pb-0'> 
            <% if assertion.score_string_gci.present? %>
              <%= print_moi_score_gci(assertion.score_string_gci, "text") %>
            <% elsif assertion.score_string_sop5.present? %>
              <%= print_moi_score_sop5(assertion.score_string_sop5, "text") %>
            <% else %>
              <%= print_moi_score(assertion.score_string, "text") %>
            <% end %>
          <% if assertion.score_string_gci.present? %>
            <% if assertion.jsonMessageVersion == "GCI.6" %>
              <%= print_animal_mode(assertion.jsonMessageVersion, assertion.score_string_gci, false) %>
            <% else %>
              <%= print_animal_mode(assertion.jsonMessageVersion, assertion.score_string_gci, false) %>
            <% end %>
          <% elsif assertion.score_string_sop5.present? %>
            <%= print_animal_mode('SOP5', assertion.score_string_sop5, false) %>
          <% else %>
            <%= print_animal_mode('SOP4', assertion.score_string, false) %>
          <% end %>
        </div>
      </td>
      <td class=" text-center <%= render_css_border %>">
        <% if assertion.respond_to?(:date) %>
          <%= mdy_date(assertion.date) %>
        <% else %>
          <%= assertion.first.mdy_date %>
        <% end %>
      </td>
      <td class=" text-center <%= render_css_border %>">
        <%= link_to gene_disease_assertions_path+"/"+assertion.perm_id, :method => :get, :class => "btn btn-xs btn-success mb-1"  do %>
          View report
        <% end %>
      </td>
    </tr>
  </tbody>
  <% 
    ## Clear the CSS set above
    render_css_border = "border-0"
    render_logo_inline = ""
  %>
<% end %>
<% # end %>
<% end %>

